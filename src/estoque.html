<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="logosan.png" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="./model.css">
	<!-- Supabase JS SDK -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>

    <title>Santoro Produção</title>
</head>

<body>
   <header class="header">



<a href="https://semijoiassantoro.com.br/">
    <img src="logosan.png">
</a>
<ul class="list">
	 
    <a href="./index.html" class="tool">Ferramentas</a>
    <a href="./processos.html" class="tool">Processos</a>
	<a href="./index.html" class="tool active">Estoque</a>
</ul>

<div class="menu-h"> Menu </div>
<ul class="list-h">
	 
    <a href="./tool.html" class="tool active">Ferramentas</a>
    <a href="./tool.html" class="tool">Processos</a>
	<a href="./index.html" class="tool">Sucata</a>
</ul>

   </header>
   


    <main> 
	
		<div class="opcoes op-estoque">
			<div class="header-op">
				<h1>Retas Latão</h1>
				<span class="expCards">-</span>
			</div>
			<ul class="list-op rl"> 
				<li data-op="rl-4">4mm</li>
			   <li data-op="rl-7">7mm</li> 
			   <li data-op="rl-10" class="active">10mm</li>
			  
			   
			</ul>
		   </div>
		   <div class="sep"></div>
			<div class="containers-est rl">
				<div class="card-dados rl-10">
					<p>carregando...</p>
				</div>

				<div class="card-dados rl-7">
					<p>carregando...</p>
				</div>

				<div class="card-dados rl-4">
					<p>carregando...</p>
				</div>
			</div>
	
		
	</main>

	<script type="module">
		import { createClient } from 'https://esm.sh/@supabase/supabase-js@2'
		
		// Conexão com seu projeto Supabase
		const supabaseUrl = 'https://exsnpdmbuscemohjdpus.supabase.co'
		const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV4c25wZG1idXNjZW1vaGpkcHVzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAzNTc5OTIsImV4cCI6MjA3NTkzMzk5Mn0.kS4VsaFTYID77kEyfd8rtfrEbXlcQDMdNToFxHL4JPc'
		const supabase = createClient(supabaseUrl, supabaseKey)
		
		// Função que cria uma tabela a partir dos dados
		function criarTabela(data, container) {
			if(!data) return
		  const table = document.createElement("table")
		  table.border = "1"
		  table.style.width = "100%"
		  table.style.borderCollapse = "collapse"
		  table.classList.add("table-list")
		
		  const thead = document.createElement("thead")
		  const headerRow = document.createElement("tr")
		  const headers = ["Aro", "Quantidade"]
		  headers.forEach(h => {
			const th = document.createElement("th")
			th.textContent = h
			th.style.padding = "5px"
			th.style.backgroundColor = "#eee"
			headerRow.appendChild(th)
		  })
		  thead.appendChild(headerRow)
		  table.appendChild(thead)
		
		  const tbody = document.createElement("tbody")
		  data.forEach(i => {
			const row = document.createElement("tr")
			row.innerHTML = `
			  <td>${i.aro}</td>
			  <td>${i.qtd}</td>
			`
			tbody.appendChild(row)
		  })
		  table.appendChild(tbody)
		
		  container.innerHTML = ""
		  container.appendChild(table)
		}
		
		// Função para buscar dados e dividir por largura
		async function carregarTabelas() {
		  const { data, error } = await supabase.from('retasbruto').select('*')
		  if (error) {
			console.error('Erro ao buscar dados:', error)
			return
		  }
		
		  // Divide os dados conforme a largura
		  const dados10 = data.filter(d => d.largura === 10)
		  const dados7  = data.filter(d => d.largura === 7)
		  const dados4  = data.filter(d => d.largura === 4)
		
		  // Monta as tabelas nas divs correspondentes
		  criarTabela(dados10, document.querySelector('.rl-10'))
		  criarTabela(dados7,  document.querySelector('.rl-7'))
		  criarTabela(dados4,  document.querySelector('.rl-4'))
		}
		
		// Inicializa o carregamento
		await carregarTabelas()
		
		// Lógica das abas (mostrar uma tabela por vez)
		const opcoes = document.querySelectorAll('.opcoes li')
		const cards = document.querySelectorAll('.card-dados')
		
		opcoes.forEach(op => {
		  op.addEventListener('click', () => {
			// remove active de todas as opções
			opcoes.forEach(o => o.classList.remove('active'))
			op.classList.add('active')
		
			const alvo = op.dataset.op
			cards.forEach(c => {
			  c.style.display = c.classList.contains(alvo) ? 'block' : 'none'
			})
		  })
		})
		
		// Mostra só a primeira tabela por padrão
		cards.forEach((c, i) => c.style.display = i === 0 ? 'block' : 'none')

		const expandBtn = document.querySelectorAll(".expCards")

expandBtn.forEach((btn) => {
  btn.addEventListener("click", (e) => {
    // acha a lista relacionada
    const list = e.target.closest(".opcoes").querySelector(".list-op")
    const contList = document.querySelectorAll(".containers-est")

    // pega a segunda classe da lista (ex: 'rl')
    const relatedClass = list.classList[1]

    contList.forEach((c) => {
      // se o container tiver a mesma classe, alterna visibilidade
      if (c.classList.contains(relatedClass)) {
        c.classList.toggle("desap")
      }
    })

    // alterna visibilidade da lista
    list.classList.toggle("desap")

    // troca símbolo do botão
    if (list.classList.contains("desap")) {
      btn.textContent = "+"
    } else {
      btn.textContent = "-"
    }

    console.log("alcancei:", list)
  })
})
		</script>
		
	  

 <script src="./script.js">
    </script>
  
 
    <br><br><br><br><br>
    <div>
       
    </div>




</body>

</html>